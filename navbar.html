<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Navigation Bar</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell,
                    sans-serif;
                background: transparent;
            }

            .navbar {
                background: linear-gradient(135deg, #1e90ff, #0b5394);
                padding: 0;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            }

            .nav-container {
                max-width: 1400px;
                margin: 0 auto;
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 0 30px;
            }

            .nav-logo {
                color: white;
                font-size: 24px;
                font-weight: 700;
                text-decoration: none;
                padding: 15px 0;
                display: flex;
                align-items: center;
                gap: 10px;
            }

            .nav-logo:hover {
                opacity: 0.9;
            }

            .nav-menu {
                display: flex;
                list-style: none;
                gap: 5px;
                align-items: center;
            }

            .nav-item {
                position: relative;
            }

            .nav-link {
                color: white;
                text-decoration: none;
                padding: 20px 20px;
                display: block;
                font-weight: 500;
                transition: all 0.3s;
                border-radius: 8px;
            }

            .nav-link:hover {
                background: rgba(255, 255, 255, 0.1);
            }

            .nav-link.active {
                background: rgba(255, 255, 255, 0.2);
                font-weight: 600;
            }

            .nav-toggle {
                display: none;
                background: none;
                border: none;
                color: white;
                font-size: 28px;
                cursor: pointer;
                padding: 10px;
            }

            /* Mobile Styles */
            @media (max-width: 768px) {
                .nav-toggle {
                    display: block;
                }

                .nav-menu {
                    position: absolute;
                    top: 100%;
                    left: 0;
                    right: 0;
                    background: linear-gradient(135deg, #1e90ff, #0b5394);
                    flex-direction: column;
                    gap: 0;
                    max-height: 0;
                    overflow: hidden;
                    transition: max-height 0.3s ease;
                    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
                }

                .nav-menu.active {
                    max-height: 400px;
                }

                .nav-link {
                    padding: 15px 30px;
                    border-radius: 0;
                    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                }

                .nav-container {
                    padding: 0 20px;
                }
            }
        </style>
    </head>
    <body>
        <nav class="navbar">
            <div class="nav-container">
                <a href="#" class="nav-logo" onclick="navigateTo('posts'); return false;"> üè† Community Hub </a>

                <button class="nav-toggle" onclick="toggleMenu()" aria-label="Toggle menu">‚ò∞</button>

                <ul class="nav-menu" id="navMenu">
                    <li class="nav-item">
                        <a href="#" class="nav-link" id="nav-posts" onclick="navigateTo('posts'); return false;">
                            üìù Posts
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" id="nav-messages" onclick="navigateTo('messages'); return false;">
                            üí¨ Messages
                        </a>
                    </li>
                </ul>
            </div>
        </nav>

        <script>
            // Get current page from parent or URL
            let currentPage = "posts";

            // Check parent window for current page
            try {
                const parentUrl = window.parent.location.href;
                if (parentUrl.includes("messages") || parentUrl.includes("messaging")) {
                    currentPage = "messages";
                } else if (parentUrl.includes("posts") || parentUrl.includes("posting")) {
                    currentPage = "posts";
                }
            } catch (e) {
                // Cross-origin restriction, use fallback
                console.log("Cannot access parent URL");
            }

            // Set active link on load
            function setActiveLink() {
                document.querySelectorAll(".nav-link").forEach((link) => {
                    link.classList.remove("active");
                });

                const activeLink = document.getElementById(`nav-${currentPage}`);
                if (activeLink) {
                    activeLink.classList.add("active");
                }
            }

            // Navigation function
            function navigateTo(page) {
                currentPage = page;
                setActiveLink();

                // Close mobile menu
                document.getElementById("navMenu").classList.remove("active");

                // Communicate with parent window
                if (page === "posts") {
                    window.parent.location.href = "posting.html"; // Change to your actual filename
                } else if (page === "messages") {
                    window.parent.location.href = "messages.html"; // Change to your actual filename
                }
            }

            // Toggle mobile menu
            function toggleMenu() {
                const menu = document.getElementById("navMenu");
                menu.classList.toggle("active");
            }

            // Close menu when clicking outside
            document.addEventListener("click", function (event) {
                const menu = document.getElementById("navMenu");
                const toggle = document.querySelector(".nav-toggle");
                const navbar = document.querySelector(".navbar");

                if (!navbar.contains(event.target)) {
                    menu.classList.remove("active");
                }
            });

            // Initialize
            setActiveLink();

            // Listen for messages from parent window
            window.addEventListener("message", function (event) {
                if (event.data.type === "setActivePage") {
                    currentPage = event.data.page;
                    setActiveLink();
                }
            });
        </script>
    </body>
</html>
